<Window x:Class="VoiceR.AnalyzeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VoiceR - UI Analysis">
    <Grid Padding="16">
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftColumn" Width="300" MinWidth="150"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*" MinWidth="400"/>
        </Grid.ColumnDefinitions>

        <!-- Left Panel: Header + TreeView -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header with metrics -->
            <StackPanel Grid.Row="0" 
                        Orientation="Horizontal" 
                        Spacing="24"
                        Margin="0,0,0,12">
                <!-- Retrieval Time -->
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Retrieval Time:" 
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="RetrievalTimeText" 
                               Text="-- ms"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <!-- Total Elements -->
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <TextBlock Text="Total Elements:" 
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    <TextBlock x:Name="TotalElementsText" 
                               Text="--"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>

            <!-- TreeView for UI elements -->
            <TreeView Grid.Row="1"
                      x:Name="UITreeView"
                      SelectionMode="Single"
                      ContextRequested="TreeView_ContextRequested"/>
        </Grid>

        <!-- Draggable Divider -->
        <Border Grid.Column="1"
                x:Name="DividerBorder"
                Width="8"
                Background="Transparent"
                Margin="4,0"
                CornerRadius="4"
                PointerPressed="Divider_PointerPressed"
                PointerMoved="Divider_PointerMoved"
                PointerReleased="Divider_PointerReleased"
                PointerEntered="Divider_PointerEntered"
                PointerExited="Divider_PointerExited">
            <Border Width="4"
                    Background="{ThemeResource ControlStrokeColorDefaultBrush}"
                    CornerRadius="2"
                    HorizontalAlignment="Center"/>
        </Border>

        <!-- Right Panel with three columns -->
        <Grid Grid.Column="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Column 1: Request JSON -->
            <Grid Grid.Column="0" Margin="0,0,8,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                           Text="Request" 
                           FontWeight="SemiBold"
                           FontSize="14"
                           Margin="0,0,0,8"/>
                
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto">
                    <TextBox x:Name="RequestJsonTextBox"
                             IsReadOnly="True"
                             TextWrapping="NoWrap"
                             AcceptsReturn="True"
                             FontFamily="Consolas"
                             FontSize="12"
                             Padding="12"
                             BorderThickness="1"
                             Background="{ThemeResource LayerFillColorDefaultBrush}"
                             BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"/>
                </ScrollViewer>
            </Grid>

            <!-- Column 2: Prompt Input with Go Button -->
            <Grid Grid.Column="1" Margin="8,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                           Text="Prompt" 
                           FontWeight="SemiBold"
                           FontSize="14"
                           Margin="0,0,0,8"/>
                
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto">
                    <TextBox x:Name="PromptTextBox"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             FontFamily="Consolas"
                             FontSize="12"
                             Padding="12"
                             BorderThickness="1"
                             PlaceholderText="Enter your prompt here..."
                             Background="{ThemeResource LayerFillColorDefaultBrush}"
                             BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"/>
                </ScrollViewer>
                
                <Button Grid.Row="2"
                        x:Name="GoButton"
                        Content="Go"
                        HorizontalAlignment="Center"
                        Margin="0,12,0,0"
                        Padding="24,8"
                        Click="GoButton_Click"/>
            </Grid>

            <!-- Column 3: Response JSON -->
            <Grid Grid.Column="2" Margin="8,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" 
                           Text="Response" 
                           FontWeight="SemiBold"
                           FontSize="14"
                           Margin="0,0,0,8"/>
                
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto">
                    <TextBox x:Name="ResponseJsonTextBox"
                             IsReadOnly="True"
                             TextWrapping="NoWrap"
                             AcceptsReturn="True"
                             FontFamily="Consolas"
                             FontSize="12"
                             Padding="12"
                             BorderThickness="1"
                             Background="{ThemeResource LayerFillColorDefaultBrush}"
                             BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"/>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</Window>
